%% Diese Datei liefert einen Befehl mit folgenden Eigenschaften:
% Laden einer Shell-Datei
% Ausführen dieser Shell-Datei mit einem angebenen Interpreter
% Evaluation zu Ergebnis der Ausführung

\lstdefinestyle{BashOutput}{
  basicstyle=\small\LILLYxlstTypeWriter,
  frame=tblr,
  numbers=none,
  frame=single,
  xleftmargin=3pt,
  xrightmargin=3pt,
  backgroundcolor=\color{MudWhite},
  rulecolor=\color{MudWhite}
}


\ifx\LILLYxCMD\undefined
%% {file} (coming soon: [input])
\NewDocumentCommand{\getFileExecutionOutput}{ m } {%
\immediate\write18{ #1 > \jobname.txt }
\lstinputlisting[style=BashOutput,language=lBash]{\jobname.txt}
\immediate\write18{ rm \jobname.txt }
}
\else
\NewDocumentCommand{\getFileExecutionOutput}{ m } {Direkte Befehlsevaluation deaktiviert!}
\fi

\NewDocumentCommand{\cbash}{ m }{%
\begingroup
\colorbox{MudWhite!93!black}{\lstinline[language=lBash]{#1}}%
\endgroup
}

\NewDocumentCommand{\previewBash}{ m } {%
\begingroup
\colorbox{MudWhite!93!black}{\lstinline[language=lBash]{$ #1}}
\getFileExecutionOutput{#1}
\endgroup
}



\NewDocumentCommand{\previewBashFile}{ m } {
\begingroup
\lstinputlisting[language=lBash, caption={Inhalt der Datei #1}]{#1}
\endgroup
\previewBash{bash #1}
}
