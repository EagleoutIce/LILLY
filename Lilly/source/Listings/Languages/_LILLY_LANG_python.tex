\lstdefinelanguage{lPython}{
    language=python,
    otherkeywords = {;,<<,>>,2>,<,|},
    alsoletter={_},
    comment=[l]{\#},
    breaklines=true,
    frame=none,
    prebreak={\raisebox{0.4\baselineskip}{\rotatebox{270}{\fontsize{4pt}{3pt}\selectfont$\curvearrowright$}}},
    basicstyle=\small\LILLYxlstTypeWriter,
    identifierstyle=\color{black},
    sensitive=false,
    numberstyle=\footnotesize\color{gray},
    morekeywords = {as,self},
    morekeywords = [2]{KNeighborsClassifier,KMeans,math},
    morekeywords = [3]{Neuron,Point2D,Point,Image,ImageFilter},
    morekeywords = [4]{fit,predict,__init__,accepts, get_accepting_neuron, get_mean_r,dist,mult_scalar,hypot, is_in,adapt,intersects,accepts,n_clusters,n_samples,centers,cluster_std,random_state,n_neighbors,weights},
    morekeywords = [5]{True,False,None,gp,nc,nr,ir},
    morestring=[b]',
    showstringspaces=true
}

\lstnewenvironment{python}[1][]
  {\lstset{language=lPython,#1}}
{}

\DeclareRobustCommand{\cpython}[1]{\LILLYxwriteLst[language=lPython]{#1}}
