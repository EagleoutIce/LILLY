\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{LILLYxGRAPHICSxPROVIDER}[2019/07/21 Stellt die Grafik-Provider-Erweiterungen fuer LILLY zur Verfuegung]

\RequirePackage{expl3}
\RequirePackage{graphicx}

\RequirePackage{LILLYxLIST}

%% Alle zur Verfügung stehenden Grafiken sollen in der entsprechendne Liste
%% REgistriert werden um auch so iterativ zugreifbar zu sein, die bennung der GRafiken sit hierbei erstmal zweitrangig, sofern sie dementsprechend eindeutig über den geladenen
%% Grafikraum ist.

\constructList[,]{RegisteredGraphics}


\newif\iflillyXgraphicsXproviderXisresizeable

%%% Stellt über getGraphics{3} eine Schnittstelle
%% für alle enthaltenen Grafiken zur Verfügung
%
%  Note: Collapse? \linewdith as width default
%
%% [width] {path} [height] width and height are mutually exclusive (to keep aspect ratio), if both given, width will Dominate by Design
\ProvideDocumentCommand{\getGraphics}{ o m o }{%
\lillyXgraphicsXproviderXisresizeabletrue%
\input{\LILLYxPATHxDATA/Graphics/#2}%
\iflillyXgraphicsXproviderXisresizeable%
\IfValueTF{#1}{\resizebox{#1}{!}{\LILLYxGRAPHICSxSHOW}}%
{\IfValueTF{#3}{\resizebox{!}{#3}{\LILLYxGRAPHICSxSHOW}}%
{\resizebox{\linewidth}{!}{\LILLYxGRAPHICSxSHOW}}%
}%
\else\fi%
}

\providecommand{\getGraphics}[1]{\input{\LILLYxPATHxDATA/Graphics/#1}%
\LILLYxGRAPHICSxSHOW{}}

%% erlaubt es direkt die PDF einzubinden - vermutlich oft um einiges schneller :D
\providecommand{\getPrerendered}[1]{\includegraphics[\linewidth]{\LILLYxPATHxDATA/Graphics/#1}}

\endinput