\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{lilly-widetext}
% ADAPTED FROM: https://svn.einsteintoolkit.org/documents/Paper_EinsteinToolkit_2010/widetext.sty
% changed to apply with PAPER LAYOUT
% Mimics the widetext environment of revtex4 for any other class package
% Eg: article.cls
%
% Compiled by: Anjishnu Sarkar
%
% Advantages:
% *) Supports float (eg: figure) in two column format (Advantage over
%      multicol package)
% *) One and twocolumn exist on the same page
% *) Flow of text shown via rule
% *) Equal height of text when in two column format
%
% Acknowledgment(s):
% 1. Instead of re-inventing the wheel, two packages (flushend, cuted) of
% the sttools bundle are used. The sttools bundle is available from CTAN.
% Lisence of these packages rests with their corresponding author.
% Any bug/problem with flushend and cuted should be forwarded to their
% corresponding package authors.
% 2. The idea of the rule came from the following latex community website

% Package required for equal height while in 2 columns format
\IfFileExists{flushend.sty}
{\RequirePackage{flushend}}
{\typeout{}
\typeout{Package widetext error: Install the flushend package which is
a part of sttools bundle. Available from CTAN.}
\typeout{}
\stop}

% Package required for onecolumn and twocolumn to exist on the same page.
% and also required for widetext environment.
\IfFileExists{cuted.sty}
{\RequirePackage{cuted}}
{\typeout{}
\typeout{Package widetext error: Install the cuted package which is
a part of sttools bundle. Available from CTAN.}
\typeout{}
\stop}

\newlength\@parindent
\@parindent\parindent

\if@twocolumn
\newenvironment{widetext}{\begin{strip}
    \par %\vspace{6pt}
    \parindent \@parindent
}%
{\vspace{-3em}\par
    \end{strip}}
\else
\newenvironment{widetext}{}{}
\fi
