\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{LILLYxLIST}[2019/07/13 Stellt die Grundlagen einer Liste fuer LILLY zur Verfuegung]

\RequirePackage{LILLYxCOMMAND}
\RequirePackage{LILLYxBOOLEAN}

\LILLYxDemandPackage{pgffor}{Fuer die Registrierung der Sprachen}
                    {Ohne gehts nicht}
                    {}{}

%% the list operation allows it to append new elements (including optional separator)
%% example process:
%% \constructList[,]{Peter}
%% \pushList{Peter}{2}    \pushList{Peter}{55}
%% \thePeter

% \gdef\lill@list@end!{}
% \gdef\lilly@iter@commalist#1:#2,{\edef\@tmp{#2}\@ifnextchar!{\list@end}{\@tmp!!\expandafter\lilly@iter@commalist#1:}}


\gdef\lilly@list@operation#1{!#1!}
\gdef\lill@list@end!{}
\gdef\lilly@iter@commalist#1,{\edef\@tmp{#1}\lilly@list@operation{\@tmp}\@ifnextchar!{\lill@list@end}{\expandafter\lilly@iter@commalist}}



\newcommand{\constructList}[2][]{%$ Definiere Liste BlahBlah
\expandafter\def\csname lilly@list@seperator@#2\endcsname{#1}
\expandafter\def\csname lilly@list@#2\endcsname{}%% Listendefinition lilly@list@BlahBlah
\expandafter\def\csname the#2\endcsname{\csname lilly@list@#2\endcsname}%% Liste kann Ã¼ber \theBlahBlah abgefragt werden
\expandafter\def\csname delete#2\endcsname{\let\csname lilly@list@#2\endcsname{}}%% delete the list
%% get an iterator for the list, it will use the specific iterator:
\expandafter\gdef\csname iter#2\endcsname{\lilly@iter@list\csname lilly@list@seperator@#2\endcsname\csname get#2\endcsname}

\expandafter\def\csname get#2\endcsname{%
    \xdef\lillyxlist{\csname lilly@list@#2\endcsname}
}
\expandafter\def\csname store#2\endcsname##1{%
    \expandafter\xdef\csname ##1\endcsname{\csname lilly@list@#2\endcsname}
}
}


\newcommand{\containsList}[2]{%
    \csname get#1\endcsname%
    \xdef\c@mp@re{#2}%
    \let\c@nditi@n@l\false%
    \foreach \d in \lillyxlist {%
        %\typeout{comparing: \d to \c@mp@re}%
        \ifthenelse{\equal{\d}{\c@mp@re}}{%
            %\typeout{Matched}%
            \global\let\c@nditi@n@l\true%
        }{}%
    }%
    \c@nditi@n@l%
}

\newcommand{\setList}[2]{%
    \expandafter\xdef\csname lilly@list@#1\endcsname{#2}
}

\newcommand{\pushList}[2]{%
    \expandafter\edef\csname lilly@list@last@#1\endcsname{\csname lilly@list@#1\endcsname}
    \expandafter\edef\csname lilly@list@#1\endcsname{\csname lilly@list@last@#1\endcsname{#2}\csname lilly@list@seperator@#1\endcsname}%
}

%% operation is work in progress
\newcommand{\popList}[1]{%
    \relax{\csname lilly@list@last@#1\endcsname}
}
\endinput