\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{LILLYxCOMMAND}[2019/07/14 Liefert den grundlegenden LILLYcommand]

\RequirePackage{LILLYxPACKAGExCTRL}

%% https://www.ctan.org/pkg/expl3
\LILLYxDemandPackage{expl3}{Da wir auch was von der tollen Latex3-Zukunft abhaben moegen :D}
                    {Leider kann LILLY aus diversen Gründen nicht ohne expl3 existieren :/}
                    {}{} %% keine Argumente

%% tex '\def' in latex style - überschreibe einen Befehl oder erzeuge ihn, wenn es ihn noch nicht gibt
\ExplSyntaxOn
\def\LILLYcommand{
    \@ifstar%
        \LILLYcommand@S %% star
        \LILLYcommand@N %% nostar
}

\def\LILLYcommand@S#1{
    \let#1\outer\renewcommand*#1
}
\def\LILLYcommand@N#1{
    \let#1\outer\renewcommand#1
}

%% DANKE an: https://tex.stackexchange.com/questions/51733/global-renewcommand-equivalent-of-global-def
\makeatletter
\def\gnewcommand{\g@star@or@long\new@command}
\def\grenewcommand{\g@star@or@long\renew@command}
\def\g@star@or@long#1{% 
  \@ifstar{\let\l@ngrel@x\global#1}{\def\l@ngrel@x{\long\global}#1}}
\ExplSyntaxOff

\endinput