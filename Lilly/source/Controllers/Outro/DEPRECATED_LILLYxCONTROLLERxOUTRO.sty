\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{LILLYxCONTROLLERxOUTRO}[2019/08/25 Stellt den Outro-Controller fuer LILLY zur Verfuegung]

%% Dieser Controller kümmert sich um die korrekte implementierung des OUTROS eines Dokuments er fügt bei Bedarf Listen für Definitionen usw an und bindet auch den Index ein etc.

% there is a clear command i know :P
\def\LILLYxCLEARxHEADFOOT{\lohead{}\cohead{}\rohead{}\lofoot{}\cofoot{}\rofoot{}}

\ifx\LILLY@Typ\LILLY@Typ@Mitschrieb
   %% Wir haben einen Mitschrieb =>
   %% - Definitionen
   %% - Sätze
   %% - Zusamenfassungen
\AtEndDocument{
   \pagestyle{empty}\tocloftpagestyle{plain}
    \ohead{}\chead{}\ihead{} %clear header
    \ofoot{}\cfoot{}\ifoot{} %clear footer => fixes double page issue
   \pagestyle{empty}% \typeout{REDNECK: \n@true\space \LILLYxSEENxDEFINITION}
   \ifx\LILLYxBOXxDefinitionxEnable\true\ifthenelse{\equal{\LILLYxSEENxDEFINITION}{\n@true}}{%
   \clearpage\phantomsection\addcontentsline{toc}{chapter}{Definitionen}
   \listofDEFINITIONS
   \clearpage}{}\fi
   \ifx\LILLYxBOXxSatzxEnable\true\ifthenelse{\equal{\LILLYxSEENxSATZ}{\n@true}}{%
   \phantomsection\addcontentsline{toc}{chapter}{Sätze}
   \listofSATZ
   \clearpage}{}\fi
    \ifx\LILLYxBOXxLemmaxEnable\true\ifthenelse{\equal{\LILLYxSEENxLEMMA}{\n@true}}{%
   \phantomsection\addcontentsline{toc}{chapter}{Lemmata}
   \listofLEMMAS\clearpage}{}\fi
   \ifx\LILLYxBOXxZusammenfassungxEnable\true\ifthenelse{\equal{\LILLYxSEENxZUSAMMENFASSUNG}{\n@true}}{%
   \phantomsection\addcontentsline{toc}{chapter}{Zusammenfassungen}
   \listofZSMS\clearpage}{}\fi
    \ifx\LILLYxBOXxUebungsblattxEnable\true\ifthenelse{\equal{\LILLYxSEENxUBS}{\n@true}}{%
   \phantomsection\addcontentsline{toc}{chapter}{Übungsblätter}
   \listofUBS}{}\fi
}
\else\ifx\LILLY@Typ\LILLY@Typ@Zusammenfassung

\providecommand{\LILLYxINDExINTERMEDIATExFORMAT}{\clearpage}

\AtEndDocument {
\addtocontents{DEFINITIONS}{\protect\thispagestyle{empty}}
\protect\pagestyle{empty}\thispagestyle{empty}
\LILLYxCLEARxHEADFOOT\pagestyle{empty}
\protect\pagestyle{empty}\TOPICS{Stichwortverzeichnis}
\printindex
\LILLYxINDExINTERMEDIATExFORMAT
\ifx\LILLYxBOXxDefinitionxEnable\true
\pagenumbering{gobble}\protect\pagestyle{empty}\phantomsection\addcontentsline{toc}{chapter}{Definitionen}\elable{mrk:DEFS}
\listofDEFINITIONS\fi
}

\fi\fi

\ifx\LILLYxBIBTEX\undefined\else

\ifx\LILLYxCMD\undefined
\immediate\write18{bibtex \jobname.aux}
\else %% NOTHING
\fi

\providecommand{\printbib}[1][\LILLYxBIBTEX]{
   \ifx\LILLY@Typ\LILLY@Typ@Mitschrieb
   \protect\pagestyle{empty}\thispagestyle{empty}
   \LILLYxCLEARxHEADFOOT\pagestyle{empty}
   \fi
   \bibliographystyle{apalike}
   \bibliography{#1}
}

\fi


\endinput